<!doctype html>
<html>

<head>
  <meta charset="utf-8"/>
  <title>90/90/90 Gauage</title>
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" type="text/css" href="css/jquery-ui.css">
  <style>
      
  #masterDiv {
    width: 80%;
    margin: 0 auto;
    margin-bottom: 50px;  
    text-align: center;
      } 
      
  h2 {
   font-family: sans-serif;
   color: #333;
}
      
  .container {
    width: 30%;
    display: inline; 
  }
 
#container3 {
  min-width: 300px;
  max-width: 600px;
  margin: 0 auto;
}      
      
  .gauge {
    width:200px; height:160px;
    display: inline-block;
    margin: 1em;

  }
      
      p {
          display: inline;
      }    

  a:link.button,
  a:active.button,
  a:visited.button,
  a:hover.button {
    margin: 30px 5px 0 2px;
    padding: 7px 13px;
  }
      
  #sliderDiv {
     width: 80%;
     margin: 0 auto;
     text-align: center;      
      }      

  </style>

</head>


<body>

  <div id="masterDiv">
    <h2>90/90/90 Goals</h2>  
    <div class="container">
    <div id="gg1" class="gauge"></div>
    <!--<p>Change value</p>  
    <input type="number" name="quantity" id="gg1_input" min="0" max="100" value="85"> 
    <a href="#" id="gg1_test" class="button grey">Test</a>-->
  </div>
  <div class="container">    
    <div id="gg2" class="gauge"></div>
    <!--<p>Change value</p>  
    <input type="number" name="quantity" id="gg2_input" min="0" max="100" value="78"> 
    <a href="#" id="gg2_test" class="button grey">Test</a>  -->
  </div>
  <div class="container">    
    <div id="gg3" class="gauge"></div>
   <!-- <p>Change value</p>  
    <input type="number" name="quantity" id="gg3_input" min="0" max="100" value="92"> 
    <a href="#" id="gg3_test" class="button grey">Test</a>  -->
   </div>   

<div id="sliderDiv">     
<p>
  <label for="amount">Date range:</label>
  <input type="text" id="amount" style="border: 0; color: #990000; font-weight: bold;" size="100"/>
</p>
 
<div id="slider-range"></div>  
</div>
</div> 
<div id="container3"></div>    
 <div id="container2" style="min-width: 310px; height: 400px; margin: 0 auto"></div> 
    
  
  <script src="js/raphael-2.1.4.min.js"></script>
  <script src="js/justgage.js"></script>
  <script
  src="https://code.jquery.com/jquery-3.1.1.min.js"
  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
  crossorigin="anonymous"></script>
  <script
  src="http://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
  integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
  crossorigin="anonymous"></script>   
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/modules/exporting.js"></script>
  <script src="https://code.highcharts.com/modules/treemap.js"></script>    
  <script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var gg1 = new JustGage({
      id: "gg1",
      value : 89,
      min: 0,
      max: 100,
      title: "% in Care",
      decimals: 0,
      gaugeWidthScale: 0.6,
      customSectors: [{
        color : "#E74C3C",
        lo : 0,
        hi : 80
      },{
        color : "#F1C40F",
        lo : 80,
        hi : 89
      },{
        color : "#2ECC71",
        lo : 89,
        hi : 100
      }],
      counter: true
    });

    $('#slider-range').click(function() {
      gg1.refresh(getRandomInt(40, 100));
    });


  });
      
  document.addEventListener("DOMContentLoaded", function(event) {
    var gg2 = new JustGage({
      id: "gg2",
      value : 78,
      min: 0,
      max: 100,
      title: "% on ATR",
      decimals: 0,
      gaugeWidthScale: 0.6,
      customSectors: [{
        color : "#E74C3C",
        lo : 0,
        hi : 80
      },{
        color : "#F1C40F",
        lo : 80,
        hi : 89
      },{
        color : "#2ECC71",
        lo : 89,
        hi : 100
      }],
      counter: true
    });

    $('#slider-range').click(function() {
      gg2.refresh(getRandomInt(30, 100));
    });


  });
 
document.addEventListener("DOMContentLoaded", function(event) {
    var gg3 = new JustGage({
      id: "gg3",
      value : 92,
      min: 0,
      max: 100,
      title: "% Virally Supressed",
      decimals: 0,
      gaugeWidthScale: 0.6,
      customSectors: [{
        color : "#E74C3C",
        lo : 0,
        hi : 80
      },{
        color : "#F1C40F",
        lo : 80,
        hi : 89
      },{
        color : "#2ECC71",
        lo : 89,
        hi : 100
      }],
      counter: true
    });

    $('#slider-range').click(function() {
      gg3.refresh(getRandomInt(70, 100));
    });

  }); 
      
$(function() {
    $( "#slider-range" ).slider({
      range: true,
      min: new Date('2013.01.01').getTime() / 1000,
      max: new Date('2017.01.01').getTime() / 1000,
      step: 86400,
      values: [ new Date('2016.06.01').getTime() / 1000, new Date('2017.01.01').getTime() / 1000 ],
      slide: function( event, ui ) {
        $( "#amount" ).val( (new Date(ui.values[ 0 ] *1000).toDateString() ) + " - " + (new Date(ui.values[ 1 ] *1000)).toDateString() );
      }
    });
    $( "#amount" ).val( (new Date($( "#slider-range" ).slider( "values", 0 )*1000).toDateString()) +
      " - " + (new Date($( "#slider-range" ).slider( "values", 1 )*1000)).toDateString());
  });  
      
$(function() {
  Highcharts.chart('container2', {
    title: {
      text: 'Monthly Patient Retention',
      x: -20 //center
    },
    subtitle: {
      text: 'Year 2016',
      x: -20
    },
    xAxis: {
      categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
        'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'
      ]
    },
    yAxis: {
      title: {
        text: 'Number of Patients'
      },
      plotLines: [{
        value: 0,
        width: 1,
        color: '#808080'
      }]
    },
    tooltip: {
      valueSuffix: ''
    },
    legend: {
      layout: 'vertical',
      align: 'right',
      verticalAlign: 'middle',
      borderWidth: 0
    },
    series: [{
      name: 'Defaulters',
      data: [185, 188, 188, 182, 180, 179, 179, 177, 180, 183, 179, 180]
    }, {
      name: 'Transferred',
      data: [69, 40, 50, 56, 30, 15, 22, 33, 40, 32, 33, 40]
    }, {
      name: 'Lost to Follow Up',
      data: [52, 49, 40, 39, 52, 51, 49, 40, 39, 40, 41, 42]
    }, {
      name: 'Self Disengaged',
      data: [39, 42, 33, 44, 45, 20, 33, 40, 44, 32, 37, 36]
    }, {
      name: 'Died',
      data: [16, 22, 20, 18, 19, 20, 15, 17, 16, 18, 19, 20]
    }, {
      name: 'HIV Negative',
      data: [16, 10, 12, 22, 20, 18, 19, 17, 12, 14, 15, 16]
    }]
  });
}); 
      
$(function() {
  Highcharts.chart('container3', {
    series: [{
      type: "treemap",
      layoutAlgorithm: 'stripes',
      alternateStartingDirection: true,
      levels: [{
        level: 1,
        layoutAlgorithm: 'sliceAndDice',
        dataLabels: {
          enabled: true,
          align: 'center',
          verticalAlign: 'top',
          style: {
            fontSize: '8px',
            fontWeight: 'bold'
          }
        }
      }],
      data: [{
        id: 'A',
        name: 'Defaulters (185)',
        color: "#EC2500"
      }, {
      	id: 'C' ,
        name: 'Lost to Follow up (52)' ,
        color: '#6F3E9C'
      }, {
        id: 'B',
        name: 'In-Care (1246)',
        color: "#ECE100",
      }, {
        id: 'O',
        name: 'Transfer (69)',
        color: '#EC9800'
      }, {
        parent: 'A',
        value: 11.5 
      }, {
        parent: 'B',
        value: 77.6
      }, {
        parent: 'O',
        value: 4.3
      }, {
        name: 'Died (16)',
        value: 1,
        color: '#9EDE00'
      }, { 
      	parent: 'C' ,
        value: 3.2
      }, {
      	name: 'HIV Negative (16)' ,
        value: 1,
        color: '#05A6F0'
      }, {
      	name: 'Self Disengaged (39)' ,
        value: 2.4 ,
        color: '#666666',
      }]
    }],
    title: {
      text: 'Patient Retention'
    }
  });
});
      
      
  </script>
</body>
</html>